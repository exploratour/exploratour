(function(){var d;var b=function(e,f){return function(){return e.apply(f,arguments)}},a=Object.prototype.hasOwnProperty,c=function(h,f){for(var e in f){if(a.call(f,e)){h[e]=f[e]}}function g(){this.constructor=h}g.prototype=f.prototype;h.prototype=new g;h.__super__=f.prototype;return h};d=jQuery;Annotator.Plugins.Tags=(function(){c(e,Delegator);e.prototype.events={annotationViewerShown:"updateViewer",annotationEditorShown:"updateEditor",annotationEditorHidden:"clearEditor",annotationEditorSubmit:"setAnnotationTags"};function e(g,f){this.setAnnotationTags=b(this.setAnnotationTags,this);this.clearEditor=b(this.clearEditor,this);this.updateEditor=b(this.updateEditor,this);e.__super__.constructor.apply(this,arguments);this.addEvents();this.tagSrc="<input type='text' class='annotator-editor-tags' placeholder='tags&hellip;'>"}e.prototype.updateEditor=function(h,i,f){var g;if(!this.tags){g=d(i).find(".annotator-editor-controls");this.tags=d(this.tagSrc).insertBefore(g).get(0)}if((f!=null?f.tags:void 0)!=null){return d(this.tags).val(this.stringifyTags(f.tags))}};e.prototype.clearEditor=function(f,g){if(this.tags){return d(this.tags).val("")}};e.prototype.setAnnotationTags=function(g,h,f){if(this.tags){return f.tags=this.parseTags(d(this.tags).val())}};e.prototype.parseTags=function(f){return f.split(/\s+/)};e.prototype.stringifyTags=function(f){return f.join(" ")};e.prototype.updateViewer=function(m,n,k){var l,g,j,o,p,h,f;g=d(n).find(".annotator-ann");f=[];for(j=0,h=g.length;(0<=h?j<h:j>h);(0<=h?j+=1:j-=1)){p=k[j].tags;o=p!=null?p.join(", "):void 0;l=g.eq(j).find(".annotator-ann-text");f.push(o&&o!==""?d("<div class='annotator-ann-tags'>"+(p.join(", "))+"</div>").insertAfter(l):void 0)}return f};return e})()}).call(this);